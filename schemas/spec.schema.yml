---
$schema: https://json-schema.org/draft-07/schema
$id: https://example.com/draft/schema
title: OpenTimeline Document
description: Definition of timeseries events.
definitions:
  record:
    title: Timeline Record
    type: object
    additionalProperties: true
    properties:
      title:
        title: Title
        type: string
      notes:
        title: Notes
        type: string
    required:
      - title
  identity: &identity
    title: Identity
    type: object
    additionalProperties: false
    required:
      - id
    properties: &identity_properties
      id:
        title: ID
        type: string
      name:
        title: Name
        type: string
      aliases:
        title: Aliases
        type: array
        items:
          title: Alias
          type: string
      urls:
        title: URLs
        type: array
        items:
          type: string
      notes:
        title: Notes
        type: string
  position: &position
    title: Location Information
    type: object
    additionalProperties: false
    properties: &position_properties
      in:
        title: Exact Location (Identity Reference)
        type: string
      where:
        title: Uncertain Location
        type: object
        properties:
          around:
            type: string
          within:
            type: string
          showAs:
            type: string
      notes:
        title: Notes
        type: string
  person:
    title: Person
    type: object
    additionalProperties: true
    required:
      - id
      - born
    properties:
      !!merge <<: *identity_properties
      born:
        title: Birth Information
        type:
          - object
          - "null"
        additionalProperties: false
        properties:
          !!merge <<: *position_properties
          date:
            title: Exact Day of Birth
            type: string
          sexus:
            title: Sexus of Person
            enum:
              - Femininum
              - Maskulinum
          when:
            title: Uncertain Date of Birth
            type: object
            properties:
              after:
                type: string
              before:
                type: string
              showAs:
                type: string
      died:
        title: Death Information
        type:
          - object
          - "null"
        additionalProperties: false
        properties:
          !!merge <<: *position_properties
          date:
            title: Exact Day of Death
            type: string
          when:
            title: Uncertain Date of Death
            type: object
            properties:
              after:
                type: string
              before:
                type: string
              showAs:
                type: string
          inMilitaryService:
            type:
              - boolean
              - "null"
      relations:
        title: Relations
        type: array
        items:
          anyOf:
            - title: Link
              type: object
              required:
                - linkedTo
              properties:
                linkedTo:
                  type: string
            - title: Marriage
              type: object
              required:
                - marriedTo
              properties:
                date:
                  title: Exact Day of Marriage
                  type: string
                when:
                  title: Uncertain Date of Marriage
                  type: object
                  properties:
                    after:
                      type: string
                    before:
                      type: string
                    showAs:
                      type: string
                where:
                  title: Uncertain Location of Marriage
                  type: string
                marriedTo:
                  type: string
                as:
                  type: string
            - title: Fatherhood
              type: object
              required:
                - fatherOf
              properties:
                fatherOf:
                  type: string
            - title: Motherhood
              type: object
              required:
                - motherOf
              properties:
                motherOf:
                  type: string
            - title: Adoptive Parenthood
              type: object
              required:
                - adopted
              properties:
                adopted:
                  type: string
                date:
                  title: Exact Day of Adoption
                  type: string
                when:
                  title: Uncertain Date of Adoption
                  type: object
                  properties:
                    after:
                      type: string
                    before:
                      type: string
                    showAs:
                      type: string
                where:
                  title: Uncertain Location of Adoption
                  type: string
                as:
                  type: string
  location:
    title: Location
    type: object
    additionalProperties: true
    required:
      - id
      - established
    properties:
      !!merge <<: *identity_properties
      position:
        title: Position
        type: object
        additionalProperties: false
        properties:
          at:
            title: Precise Location
            type: string
            pattern: ^\d{1,3}/\d{0,3}/\d{0,3}/[NS] \d{1,3}/\d{0,3}/\d{0,3}/[EW]$
          where:
            title: Uncertain Location
            type: object
            properties:
              around:
                type: string
              within:
                type: string
              showAs:
                type: string
      established:
        title: Establishment Information
        type:
          - object
          - "null"
        additionalProperties: false
        properties:
          !!merge <<: *position_properties
          date:
            title: Exact Day of Establishment
            type: string
          when:
            title: Uncertain Date of Establishment
            type: object
            properties:
              after:
                type: string
              before:
                type: string
              showAs:
                type: string
      dissolved:
        title: Dissolvement Information
        type:
          - object
          - "null"
        additionalProperties: false
        properties:
          !!merge <<: *position_properties
          date:
            title: Exact Day of Dissolvement
            type: string
          when:
            title: Uncertain Date of Dissolvement
            type: object
            properties:
              after:
                type: string
              before:
                type: string
              showAs:
                type: string
      relations:
        title: Relations
        type: array
        items:
          anyOf:
            - title: Link
              type: object
              required:
                - linkedTo
              properties:
                linkedTo:
                  type: string
            - title: Containment
              type: object
              required:
                - contains
              properties:
                contains:
                  type: string
  period:
    title: Period
    type: object
    additionalProperties: true
    required:
      - id
      - started
    properties:
      !!merge <<: *identity_properties
      started:
        title: Start of Period
        type:
          - object
          - "null"
        additionalProperties: false
        properties:
          !!merge <<: *position_properties
          date:
            title: Exact Day of Start
            type: string
          when:
            title: Uncertain Date of Start
            type: object
            additionalProperties: false
            properties:
              after:
                type: string
              before:
                type: string
              showAs:
                type: string
      ended:
        title: End of Period
        type:
          - object
          - "null"
        additionalProperties: false
        properties:
          !!merge <<: *position_properties
          date:
            title: Exact Day of End
            type: string
          when:
            title: Uncertain Date of End
            type: object
            additionalProperties: false
            properties:
              after:
                type: string
              before:
                type: string
              showAs:
                type: string
      relations:
        title: Relations
        type: array
        items:
          anyOf:
            - title: Link
              type: object
              required:
                - linkedTo
              properties:
                linkedTo:
                  type: string
            - title: Containment
              type: object
              required:
                - contains
              properties:
                contains:
                  type: string
type: object
additionalProperties: true
properties:
  identity:
    oneOf:
      - $ref: '#/definitions/identity'
      - $ref: '#/definitions/person'
      - $ref: '#/definitions/location'
      - $ref: '#/definitions/period'
  color:
    title: Color
    type: string
    examples:
      - '#FF0000'
      - transparent
      - audio
      - video
  prefix:
    title: Prefix
    type: string
  private:
    title: Private Document
    type: boolean
    default: true
  sources:
    title: Sources
    type: array
    items:
      title: Source
      type: string
  timeline:
    title: Timeline
    patternProperties:
      .+:
        title: Event
        oneOf:
          - $ref: '#/definitions/record'
          - type: string
          - type: array
            items:
              oneOf:
                - $ref: '#/definitions/record'
                - type: string
    type: object
required:
  - timeline
